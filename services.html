<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jan 9, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>
    Services Reference - Exanpe T5 Lib</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
      <meta name="author" content="Exanpe" />
    <meta name="Date-Revision-yyyymmdd" content="20120109" />
    <meta http-equiv="Content-Language" content="en" />
        
        </head>
  <body class="composite">
    <div id="banner">
                        <a href="http://exanpe.github.com/exanpe-t5-lib/" id="bannerLeft">
                                        <img src="http://maven.apache.org/images/apache-maven-project.png" alt="Exanpe T5 Lib" />
                </a>
                          <div id="bannerRight">
                                        <img src="http://maven.apache.org/images/maven-small.gif" alt="Exanpe T5 Lib" />
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                  <div class="xright">        
                
                 <span id="publishDate">Last Published: 01-09-2012</span>
            </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Exanpe T5 Lib</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Presentation">Presentation</a>
            </li>
                  <li class="none">
                          <a href="getting_started.html" title="Getting started">Getting started</a>
            </li>
                  <li class="none">
                          <a href="reference.html" title="Component Reference">Component Reference</a>
            </li>
                  <li class="none">
            <strong>Services Reference</strong>
          </li>
                  <li class="none">
                          <a href="user_guide.html" title="User Guide">User Guide</a>
            </li>
                  <li class="none">
                          <a href="http://exanpe-t5-lib.appspot.com/" class="externalLink" target="_blank" title="Demo">Demo</a>
            </li>
                  <li class="none">
                          <a href="download.html" title="Download">Download</a>
            </li>
                  <li class="none">
                          <a href="changes-report.html" title="Changes">Changes</a>
            </li>
                  <li class="none">
                          <a href="migration.html" title="Migration Notes">Migration Notes</a>
            </li>
                  <li class="none">
                          <a href="roadmap.html" title="Road Map">Road Map</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="about.html" title="About us">About us</a>
            </li>
          </ul>
                       <h5>Our links</h5>
                  <ul>
                  <li class="none">
                          <a href="http://tapestry.apache.org/" class="externalLink" title="Tapestry 5">Tapestry 5</a>
            </li>
                  <li class="none">
                          <a href="http://maven.apache.org/" class="externalLink" title="Maven 2">Maven 2</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/exanpe/exanpe-t5-lib" class="externalLink" title="Exanpe GitHub">Exanpe GitHub</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                                                                                                                                                        <li class="collapsed">
                          <a href="project-info.html" title="Project Information">Project Information</a>
                  </li>
                                                                                                                          <li class="collapsed">
                          <a href="project-reports.html" title="Project Reports">Project Reports</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
                
                <div id="lastPublished">
        <span id="projectVersion">Version: 1.2.0</span>
      </div>
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        

  
     
	<div class="section"><h2>Services<a name="Services"></a></h2>
        Our component library provides some extended services to help easing developement.
        From our experience, these features really help completing Tapestry 5 base services on diverses themes.
        <br /><br />
		<div class="section"><h2>Security : Authorize<a name="Security_:_Authorize"></a></h2>
        
        Exanpe-t5-lib provides a full set of services to apply some fine-grained role based security in your application.<br />
        With the annotation <b>@Authorize</b> and the component <b>Authorize</b>, you can apply security on :
        <ul>
          <li>The whole page, setting the <b>@Authorize annotation</b> on your page class.</li>
          <li>A method, setting the @Authorize annotation on your page class method.</li>
          <li>A chunk of rendering, using the <b><div class="source"><pre>&lt;t:authorize&gt;</pre></div> component</b>.</li>
          <li>Anything, using the <b>Authorize mixin</b>.</li>
        </ul>
        <br />
        Everything is base on the roles declared in the current user java.security.Principal, no matter how nor with which framework you initialize them.<br />
        All 4 authorization level are based on a unique way for defining the authorized roles : 
        <ul>
          <li><b>any</b> : Any role required to grant access</li>
          <li><b>all</b> : All role required to grant access</li>
          <li><b>not</b> : Any role deny access</li>
        </ul>
        
      <div class="section"><h2>Session Management : ContextPageReset<a name="Session_Management_:_ContextPageReset"></a></h2>
        <div class="section"><h3>Presentation<a name="Presentation"></a></h3>
        Session management can be a pain, in any application. Tapestry 5 provides @Persist and @SessionAttribute to store, 
        @PageReset and @DiscardAfter to clean, but that was not enough for our applications.<br /><br />
        We needed a way to clean up a page's information on specific case, which has to &quot;reboot&quot; the page, and moreover, a whole &quot;navigation context&quot;.<br />
        This is the goal of the <b>@ContextPageReset</b> annotation.<br /><br />
        
        <b>Any method annotated with @ContextPageReset will be triggered upon a specific context value present in the URL.<br />
        Note that this feature have to be activated (it is deactivated by default to avoid regression as the context value becomes unusable)</b><br /><br />
        
        </div><div class="section"><h3>The context<a name="The_context"></a></h3>
        By default, the context triggering the method call is &quot;reset&quot;, meaning that everytime you call an URL with /reset inside, the clean up will be done.<br />
        This means that you will no longer be able to call a URL containing &quot;/reset&quot;.<br />
        This value can be modified by contributing a Symbol in your Module class :
      <div class="source"><pre>
    public static void contributeApplicationDefaults(MappedConfiguration&lt;String, String&gt; configuration)
    {
        ...
        configuration.add(ExanpeSymbols.CONTEXT_PAGE_RESET_MARKER, &quot;new_context&quot;);
        ...
    }
      
      </pre></div>
        
        </div><div class="section"><h3>Feature activation<a name="Feature_activation"></a></h3>
        To activate the feature, you have to explicitly add in your Module class :
  
    <div class="source"><pre>
    
    public void contributeComponentRequestHandler(OrderedConfiguration&lt;ComponentRequestFilter&gt; configuration)
    {
        ...
        configuration.addInstance(&quot;ContextPageResetFilter&quot;, ContextPageResetFilter.class);
        ...
    }
    
    </pre></div> 
    
    Also, as the whole Tapestry page transformation have been modified in Tapestry 5.3, 
    <b>a package protected method &quot;void onActivate()&quot; have to be present in any Tapestry 5.3 page's class 
    containing a @ContextPageReset</b>.
    
    Please have a look at the demo for a concrete usage.
   
      </div><div class="section"><h2>Internationalization : LocaleSession<a name="Internationalization_:_LocaleSession"></a></h2>
        <div class="section"><h3>Presentation<a name="Presentation"></a></h3>
          This feature allow you to store a language (through Locale) choosen by the user in the user session.<br />
          This differ from the default implementation storing the locale directly in the page links.<br />
          In order to speed up filter processing, this feature is not activated by default, as it is a very specific feature. 
        </div><div class="section"><h3>Store the locale<a name="Store_the_locale"></a></h3>
          To store the locale depending on the user choice, you have to inject in your page the LocaleSessionService service, then set it.<br />
<div class="source"><pre>
      

Page :        
    @Inject
    private LocaleSessionService localeSessionService;

    void onActionFromFr()
    {
        localeSessionService.setLocale(Locale.FRANCE);
    }
}

Module : 
public static void contributeApplicationDefaults(MappedConfiguration&lt;String, String&gt; configuration)
    {
        ...
        configuration.add(SymbolConstants.SUPPORTED_LOCALES, &quot;en,fr&quot;);
        ...
    }

    </pre></div>           
        </div><div class="section"><h3>Feature activation<a name="Feature_activation"></a></h3>
         To activate the feature, you have to explicitly add in your Module class :
  
    <div class="source"><pre>
    
    public void contributeComponentRequestHandler(OrderedConfiguration&lt;ComponentRequestFilter&gt; configuration)
    {
        ...
        configuration.addInstance(&quot;LocaleSessionFilter&quot;, LocaleSessionRequestFilter.class);
        ...
    }
    
    </pre></div> 
    </div></div>
  
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2012.
          All Rights Reserved.      
                
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
